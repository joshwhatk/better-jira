!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){n(1),n(2),n(3),e.exports=n(4)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"isPresent",value:function(){try{return"JIRA"===document.querySelector('meta[name="application-name"]').content}catch(e){return!1}}},{key:"isNotPresent",value:function(){return!e.isPresent()}},{key:"hasLoadedSwimlanes",value:function(){return!!document.querySelector(".ghx-swimlane")}},{key:"hasNotLoadedSwimlanes",value:function(){return!e.hasLoadedSwimlanes()}},{key:"columns",value:function(){return document.querySelector(".ghx-swimlane > .ghx-columns")}},{key:"content",value:function(){return document.getElementById("content")}}]),e}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id="ghx-detail-view",this.Storage=chrome.storage.sync,this.listening=!1,this.running=!0,this.manageMouseListener=this.manageMouse.bind(this)}return a(e,[{key:"run",value:function(){var e=this;if(r.isNotPresent())this.running=!1;else{var t=document.getElementById(this.id);t?t.addEventListener("mouseenter",function(){if(null===t.querySelector(".better-resize")){var n=document.createElement("div");n.classList.add("better-resize"),t.appendChild(n),t.querySelector(".better-resize").addEventListener("mousedown",function(t){t.preventDefault(),2!==t.button&&(document.addEventListener("mousemove",e.manageMouseListener),e.listening=!0)}),document.addEventListener("mouseup",function(t){e.listening&&(document.removeEventListener("mousemove",e.manageMouseListener),e.listening=!1,e.saveDetailViewWidth())})}}):this.running=!1}}},{key:"manageMouse",value:function(e){if(this.running){var t=window.innerWidth-e.pageX+2;document.documentElement.style.setProperty("--detail-view-width",t+"px")}}},{key:"saveDetailViewWidth",value:function(){this.running&&(console.log("ðŸ”§: Detail Width",document.documentElement.style.getPropertyValue("--detail-view-width")),this.Storage.set({detailViewWidth:document.documentElement.style.getPropertyValue("--detail-view-width")}))}}]),e}()),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cssClass="standup",this.data={},this.standupListener=this.doStandup.bind(this),this.running=!0}return u(e,[{key:"run",value:function(e){if(r.isNotPresent())this.running=!1;else if(e){document.body.classList.add(this.cssClass),window.addEventListener("keydown",this.standupListener);var t=document.createElement("div");t.classList.add("instructions"),t.innerHTML="<ul><li>Press <kbd>S</kbd> to start walking the board</li>\n      <li>Use <kbd>Shift</kbd> + <kbd>&larr;</kbd>/<kbd>&rarr;</kbd> to move up and down the board.</li></ul>",document.body.appendChild(t),this.initializeStandup()}else this.cleanupStandup()}},{key:"initializeStandup",value:function(){var e=this;if(this.running){window.standup=!0,this.data.swimlanes=[],Array.from(document.querySelectorAll(".ghx-swimlane")).forEach(function(t){var n=t.querySelectorAll(".ghx-columns > .ghx-column");e.data.columnCount=n.length,e.data.pointer=e.data.columnCount-1,n[e.data.pointer].classList.add("large-column"),e.data.swimlanes.push(n)});var t=document.getElementById("ghx-column-header-group").querySelectorAll(".ghx-column");t[this.data.pointer].classList.add("large-column"),this.data.swimlanes.push(t)}}},{key:"cleanupStandup",value:function(){if(document.body.classList.remove(this.cssClass),window.standup=!1,window.removeEventListener("keydown",this.standupListener),void 0!==this.data.pointer&&void 0!==this.data.swimlanes){var e=document.querySelector(".instructions");null!==e&&e.remove(),this._clearColumnBackground()}}},{key:"doStandup",value:function(e){if(this.running){if("ArrowLeft"===e.key&&e.shiftKey){if(e.preventDefault(),this.data.pointer-1<0)return;this._clearColumnBackground(),this.data.pointer=this.data.pointer-1,this._setColumnBackground()}if("ArrowRight"===e.key&&e.shiftKey){if(e.preventDefault(),this.data.pointer+1===this.data.columnCount)return;this._clearColumnBackground(),this.data.pointer=this.data.pointer+1,this._setColumnBackground()}}}},{key:"_clearColumnBackground",value:function(){var e=this;this.data.swimlanes.forEach(function(t){t[e.data.pointer].classList.remove("large-column")})}},{key:"_setColumnBackground",value:function(){var e=this;this.running&&this.data.swimlanes.forEach(function(t){t[e.data.pointer].classList.add("large-column")})}}]),e}()),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var d=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data={},this.Storage=chrome.storage.sync,this.running=!0,r.isNotPresent()?this.running=!1:(this._initialColumnResize(),this.Storage.get("standup",function(e){t._initiateStandup(e.standup)}))}return l(e,null,[{key:"initialize",value:function(){return new this}}]),l(e,[{key:"update",value:function(e){this._updateColumnWidths(e.detail),this._initiateStandup(e.detail.standup)}},{key:"_updateColumnWidths",value:function(e){this.running&&(e.enabled?(document.body.classList.add("better-jira"),this._getPreferredWidth(e)):document.body.classList.remove("better-jira"))}},{key:"_ifEnabled",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.running&&this.Storage.get("enabled",function(n){n.enabled?e():t()})}},{key:"_initialColumnResize",value:function(){var e=this;this.running&&setTimeout(function(){if(r.hasNotLoadedSwimlanes())return e._initialColumnResize();e._ifEnabled(function(){document.body.classList.add("better-jira"),e.Storage.get("columnWidth",e._getPreferredWidth.bind(e)),e._protectAgainstReactBoardReloading()},function(){document.body.classList.remove("better-jira")})},100)}},{key:"_getPreferredWidth",value:function(e){this.running&&(this.data.columnWidth=e.columnWidth,isNaN(this.data.columnWidth)&&(this.data.columnWidth=200),this._setPreferredWidth())}},{key:"_setPreferredWidth",value:function(){if(this.running){var e,t,n=void 0;if(e=this.data.columnWidth,!((n=(t=r.columns().querySelectorAll(".ghx-column").length)*e+12*t)<10)){if(n<window.innerWidth){var i=document.querySelector("#gh");n=parseInt(i.offsetWidth)-parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-left"))}try{var a={poolWidth:n};this.Storage.set(a),this._setPoolWidth(n)}catch(e){console.error(e)}}}}},{key:"_setPoolWidth",value:function(e){document.documentElement.style.setProperty("--viewport-width",e+"px")}},{key:"_setDetailViewWidth",value:function(e){document.documentElement.style.setProperty("--detail-view-width",e)}},{key:"_initiateStandup",value:function(e){s.run(e)}},{key:"_protectAgainstReactBoardReloading",value:function(){var e=this,t=new MutationObserver(function(n){n.find(function(e){return!(e.removedNodes<1)&&[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.removedNodes)).find(function(e){return"ghx-pool-column"===e.id})})&&(t.disconnect(),e._initialColumnResize())});t.observe(r.content(),{childList:!0,subtree:!0})}}]),e}().initialize();o.run(),document.addEventListener("better-jira:updated",function(e){console.log("ðŸ”§: ",e.detail),d.update(e)})},function(e,t){},function(e,t){},function(e,t){}]);